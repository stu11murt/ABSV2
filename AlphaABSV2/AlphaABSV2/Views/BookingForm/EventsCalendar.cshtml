@model AlphaABSV2.Models.BookingForm
@{
    ViewBag.Title = "Events Calendar";
}

<div class="small-header transition animated fadeIn">
    <div class="hpanel">
        <div class="panel-body">
            <div id="hbreadcrumb" class="pull-right">
                <ol class="hbreadcrumb breadcrumb">
                    <li><a href="@Url.Action("Index", "Dashboard")">Dashboard</a></li>
                    <li class="active">
                        <span>Events Calendar</span>
                    </li>
                </ol>
            </div>
            <h2 class="font-light m-b-xs">
                Events Calendar
            </h2>
            <small>Every Event.</small>
        </div>
    </div>
</div>

<div class="content">

    <div class="row">
         <div class="col-lg-12">
            <div class="hpanel">
                <div class="panel-heading">
                    <div class="panel-tools">
                        <a class="showhide"><i class="fa fa-chevron-up"></i></a>
                        <a class="closebox"><i class="fa fa-times"></i></a>
                    </div>
                    Calendar
                </div>
                <div class="panel-body">
                    <div id="calendar"></div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Styles {
    @Styles.Render("~/bundles/fullCalendar/css")
    @Styles.Render("~/bundles/jqueryui/css")

}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryui/js")
    @Scripts.Render("~/bundles/moment/js")
    @Scripts.Render("~/bundles/fullCalendar/js")

    <script type="text/javascript">

        $(function () {


            /* initialize the external events
             -----------------------------------------------------------------*/

            $('#external-events div.external-event').each(function () {

                // store data so the calendar knows to render an event upon drop
                $(this).data('event', {
                    title: $.trim($(this).text()), // use the element's text as the event title
                    stick: true // maintain when user navigates (see docs on the renderEvent method)
                });

                // make the event draggable using jQuery UI
                $(this).draggable({
                    zIndex: 1111999,
                    revert: true,      // will cause the event to go back to its
                    revertDuration: 0  //  original position after the drag
                });

            });


            /* initialize the calendar
             -----------------------------------------------------------------*/
            var date = new Date();
            var d = date.getDate();
            var m = date.getMonth();
            var y = date.getFullYear();

            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                editable: true,
                droppable: true, // this allows things to be dropped onto the calendar
                drop: function () {
                    // is the "remove after drop" checkbox checked?
                    if ($('#drop-remove').is(':checked')) {
                        // if so, remove the element from the "Draggable Events" list
                        $(this).remove();
                    }
                },
                dayClick: function(date, jsEvent, view) {

                    //alert('Clicked on: ' + date.format());

                    //alert('Coordinates: ' + jsEvent.pageX + ',' + jsEvent.pageY);

                    //alert('Current view: ' + view.name);

                    // change the day's background color just for fun
                    $(this).css('background-color', 'red');
                    var url = "/BookingForm/QuickView?eDate=" + date.format();
                    window.location.href = url;
                },
                events: "/BookingForm/GetEvents/"
            });
            //$(document).ready(function () {
            //    $('#calendar').fullCalendar({
            //        theme: true,
            //        header: {
            //            left: '',
            //            center: '',
            //            right: ''
            //        },
            //        defaultView: 'agendaDay',
            //        editable: false,
            //        events: "/BookingForm/GetEvents/"
            //    });
            //});

        });

    </script>
}
