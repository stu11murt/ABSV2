@model IEnumerable<AlphaABSV2.Models.EventRecord>

@{
    var pageName = "DaySheets Export";
    ViewBag.Title = pageName;
    var sDate = ViewBag.PassedDate;
}

<div class="normalheader transition animated fadein">
    <div class="hpanel">
        <div class="panel-body">
            <a class="small-header-action" href="">
                <div class="clip-header">
                    <i class="fa fa-arrow-up"></i>
                </div>
            </a>
            <div class="row">
            </div>
            <strong>
                Select Event Date
            </strong>
            <div id="datepicker" data-date="@sDate"></div>
            <input type="hidden" id="my_hidden_input" />
        </div>
    </div>
</div>

<div class="content animate-panel">
    <div>
        <div class="row">
            <div class="col-lg-12">
                <div class="hpanel">
                    <div class="panel-heading">
                        <div class="panel-tools">
                            <a class="showhide"><i class="fa fa-chevron-up"></i></a>
                        </div>
                        @Html.Partial("DaySheetButtonsMayhem")
                    </div>
                    <div class="panel-body">
                        @Html.Partial("View", Model)
                    </div>
                </div>
            </div>
        </div>
    </div>
    <p>
        @Html.ActionLink("Export To PDF", "ExportPDF", null, new { @class = "btn btn-primary btn-md" })
        @*@Html.ActionLink("Export To Excel", "ExportToExcel", null, new { @class = "btn btn-primary btn-md" })*@
        <button type="button" id="ExportToExcel" class="btn-lg w-xs btn-info" data-id="1">Export To Excel</button>
    </p>
</div>

@section Styles {
    @Styles.Render("~/bundles/datepicker/css")
}
@section Scripts {

    @Scripts.Render("~/bundles/datepicker/js")  

    <script type="text/javascript">
        

        $('#datepicker').datepicker();

        var sDate = $('#datepicker').attr('data-date');

        $("#datepicker").on("changeDate", function (event) {
            $("#my_hidden_input").val(
                    $("#datepicker").datepicker('getFormattedDate')
            )
            
            sDate = $("#my_hidden_input").val();
           
        });

        $('#ExportToExcel').click(function () {
            var url = "/Admin/ExportToExcel?eventDate=" + sDate + "&queryType=" + $(this).attr("data-id");
            window.location.href = url;
        });

        $('#paintball').click(function() {
            var url = "/Admin/DaySheets?selectedDate=" + sDate + "&queryType=" + $(this).attr("data-id");
            window.location.href = url;
        });

        $('#prepay').click(function () {
            var url = "/Admin/DaySheets?selectedDate=" + sDate + "&queryType=" + $(this).attr("data-id");
            window.location.href = url;
        });

        $('#laser').click(function () {
            var url = "/Admin/DaySheets?selectedDate=" + sDate + "&queryType=" + $(this).attr("data-id");
            window.location.href = url;
        });

        $('#walkon').click(function () {
            var url = "/Admin/DaySheets?selectedDate=" + sDate + "&queryType=" + $(this).attr("data-id");
            window.location.href = url;
        });

        $('#bigticket').click(function () {
            var url = "/Admin/DaySheets?selectedDate=" + sDate + "&queryType=" + $(this).attr("data-id");
            window.location.href = url;
        });

        
        //$('#datepicker').change(function () {
        //    var url = "/Admin/DaySheets?selectedDate=" + $(this).val();
        //    window.location.href = url;
        //});

    </script>

}